\documentclass[titlepage, openany]{book}
%\documentclass[titlepage, openany, oneside]{book}
\usepackage[cache=false]{minted}
\usepackage{xeCJK}
\usepackage{geometry}
\usepackage{titlesec}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{ragged2e}
\usepackage{multicol}
\usepackage{fancyhdr}
\usepackage{emptypage}
\usepackage{graphicx}
\usepackage{enumitem}
\usepackage{pdfpages}
\usepackage{tocloft}
\usepackage{lipsum}
\usepackage{xpatch}
\usepackage{mdframed}
\usepackage{textcomp}
\usepackage{enumitem}

\geometry{a4paper, scale=0.8}
%\geometry{a4paper, scale=0.9}
\pagestyle{fancy}
\fancypagestyle{plain}{}

\titleformat{\chapter}{\huge\bfseries\centering}{}{0em}{}
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection.\ #1}}
\fancyhead[RO,LE]{\rightmark}
\fancyhead[LO,RE]{\leftmark}
\renewcommand{\contentsname}{目录}
\renewcommand{\chaptertitlename}{Ch}
\renewcommand{\headrulewidth}{1pt}
\renewcommand{\footrulewidth}{1pt}

% Splitter of multicols
%\makeatletter
%\def\columnseprulecolor\vrule\@width\columnseprule{\vbox to \ht\mult@rightbox{\leaders\vbox{\kern0.4pt\hbox{.}\kern0.4pt}\vfill}}
%\makeatother

% New chapter for limited version
%\newcommand{\mychapter}[2]{
    %\noindent\rule\linewidth{2pt}
    %\begin{multicols}{2}
        %\let\clearpage\relax\chapter{#1}
        %\input{#2}
    %\end{multicols}
%}
% New chapter for unlimited version
\newcommand{\mychapter}[2]{
    \chapter{#1}
    \input{#2}
    \cleardoublepage
}

\renewcommand{\theFancyVerbLine}{\sffamily\textcolor[rgb]{0.5, 0.5, 0.5}{\tiny\arabic{FancyVerbLine}}}
\usemintedstyle{colorful}
\newcommand{\myminted}[2]{
    \inputminted[
        breaklines,
        breakafter=()\&|,
        fontsize=\small,
        frame=single,
        framesep=1mm,
        framerule=1pt,
        linenos,
        numbersep=1pt,
        tabsize=4,
        %xleftmargin=4pt
    ]{#1}{#2}
}

% Smaller title and spacing
%\titleformat{\chapter}{\normalfont\bfseries\Large}{\textcolor[rgb]{0.5, 0.5, 0.5}{\chaptertitlename \thechapter.}}{10pt}{}
%\titlespacing{\chapter}{0pt}{0pt}{1pt}
%\titleformat{\section}{\normalfont\bfseries\large}{\thesection.}{10pt}{}
%\titlespacing{\section}{0pt}{0pt}{0.5pt}
%\titleformat{\subsection}{\normalfont\bfseries\normalsize}{}{0pt}{}
%\titlespacing{\subsection}{0pt}{0pt}{0pt}
%\setlength{\cftbeforetoctitleskip}{0pt}
%\setlength{\cftaftertoctitleskip}{1pt}

\begin{document}
    % Title for unlimited version
    \begin{titlepage}
        \centering
        \rule{\linewidth}{0.5mm}\\[0.4cm]
        {\Huge\bfseries Aerial Ace}\\[\baselineskip]
        {\textit {\Large Team Reference Material}}\\
        {\textit {\small (unlimited version)}}\\[0.4cm]
        \rule{\linewidth}{0.5mm}
        \vfill
        \includegraphics[scale=3]{pictures/aerial-ace.jpg}
        \vfill
        \makebox[1.6cm]{\Large 顾 \hfill 逸}\\[0.1cm]
        \makebox[1.6cm]{\Large 陈 \hfill 彤}\\[0.1cm]
        \makebox[1.6cm]{\Large 陈 \hfill 雪 \hfill 阳}\\[0.4cm]
        \includegraphics[scale=0.4]{pictures/jetbrains.png}
        \includegraphics[scale=0.4]{pictures/icpc.png}
        \includegraphics[scale=0.4]{pictures/sjtu.png}\\
        \rule{\linewidth}{0.3mm}\\[0.4cm]
        \small{Shanghai Jiao Tong University, 2019}
    \end{titlepage}
    \cleardoublepage
    \setcounter{page}{1}
    % TOC for unlimited version
    \tableofcontents
    \cleardoublepage
    \setcounter{page}{1}
    % Title & TOC for limited version
    %\clearpage
    %\setcounter{page}{1}
    %\noindent\rule\linewidth{2pt}\\[0.3cm]
    %\centerline{\textbf{\Huge Platelet}}\\[\baselineskip]
    %\centerline{\large Team Reference Material}\\
    %\centerline{\small (25-page version)}\\[0.3cm]
    %\noindent\rule\linewidth{2pt}
    %\small
    %\begin{multicols}{2}
        %\tableofcontents
    %\end{multicols}

    \mychapter{Graph Theory}{graph_theory.tex}
    \mychapter{Math}{math.tex}
    \mychapter{Geometry}{geometry.tex}
    \mychapter{String}{string.tex}
    \mychapter{Data Structure}{data_structure.tex}
    \mychapter{Others}{others.tex}
    % Picture for limited version
    %\vfill
    %\centerline{\includegraphics[scale=1]{aerial-ace.jpg}}
    %\vfill
\end{document}
